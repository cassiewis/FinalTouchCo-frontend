<body class="create-button-form">
    <button class="create-button" (click)="openProductCreator()">Create Product</button>

    <!-- Popup Modal -->
    <div *ngIf="popupOpen" class="popup-overlay">
    <div class="popup-content">
      <h1 class="title">Create Product</h1>
      <button mat-button (click)="closeProductCreator()" class="close-button">X</button>
      <div class="form-body">
        <!-- Product Form -->
        <form (ngSubmit)="createProduct()" #productForm="ngForm" class="form-body">
            <!-- Form fields for product details -->
            <div class="form-section">
                <div class="info-side">

                    <mat-form-field appearance="outline" class="input-item">
                        <mat-label>Product Name</mat-label>
                        <input matInput class="input-box" placeholder="Enter Product Name" [(ngModel)]="product.name" name="name" required>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="input-item">
                        <mat-label>ProductId</mat-label>
                        <input matInput class="input-box" placeholder="Enter product id" name="productId" [(ngModel)]="product.productId" required>
                    </mat-form-field>

                    <div class="numbers-container">
                        <mat-form-field appearance="outline" class="input-item">
                            <mat-label>Count</mat-label>
                            <input matInput class="input-box" type="number" placeholder="Add Item Quantity" [(ngModel)]="product.quantity" name="quantity" required>
                        </mat-form-field>

                        <mat-form-field appearance="outline" class="input-item">
                            <mat-label>Price</mat-label>
                            <input matInput class="input-box" type="number" placeholder="Enter Price" [(ngModel)]="product.price" name="price" required>
                        </mat-form-field>

                        <mat-form-field appearance="outline" class="input-item">
                            <mat-label>Deposit</mat-label>
                            <input matInput class="input-box" type="number" placeholder="Enter Deposit" [(ngModel)]="product.deposit" name="customerNotes" required>
                        </mat-form-field>
                    </div>

                    <mat-form-field appearance="outline" class="input-item">
                        <mat-label>Description</mat-label>
                        <textarea matInput class="input-box" placeholder="Enter Description" [(ngModel)]="product.description" name="description" required></textarea>
                    </mat-form-field>

                    <!-- Tags Selection with Checkboxes -->
                    <div class="tags-section">
                        <h4>Tags Selection</h4>
                        <div class="tag-category">
                            <h5>Event Types</h5>
                            <div class="checkbox-grid">
                                <mat-checkbox 
                                    *ngFor="let eventType of eventTypes" 
                                    [checked]="isTagSelected(eventType)"
                                    (change)="toggleTag(eventType, $event.checked)"
                                    class="tag-checkbox">
                                    {{ eventType }}
                                </mat-checkbox>
                            </div>
                        </div>

                        <div class="tag-category">
                            <h5>Categories</h5>
                            <div class="checkbox-grid">
                                <mat-checkbox 
                                    *ngFor="let category of categories" 
                                    [checked]="isTagSelected(category)"
                                    (change)="toggleTag(category, $event.checked)"
                                    class="tag-checkbox">
                                    {{ category }}
                                </mat-checkbox>
                            </div>
                        </div>

                        <div class="tag-category">
                            <h5>Materials</h5>
                            <div class="checkbox-grid">
                                <mat-checkbox 
                                    *ngFor="let material of materials" 
                                    [checked]="isTagSelected(material)"
                                    (change)="toggleTag(material, $event.checked)"
                                    class="tag-checkbox">
                                    {{ material }}
                                </mat-checkbox>
                            </div>
                        </div>
                    </div>

                    <div class="checkbox-container">
                        <mat-checkbox [(ngModel)]="product.active" name="active">
                            Active
                        </mat-checkbox>
                        <mat-checkbox [(ngModel)]="product.custom" name="custom">
                            Custom
                        </mat-checkbox>
                    </div>
                    
                    <mat-form-field appearance="outline" class="input-item">
                        <mat-label>Image url</mat-label>
                        <input matInput placeholder="Enter image url" name="imageUrl" [(ngModel)]="product.imageUrl" required>
                    </mat-form-field>

                </div>
            </div>
            <!-- Submit button -->
            <button mat-raised-button color="primary" type="submit" [disabled]="!productForm.valid">Create Product</button>
        </form>
        </div>
    </div>
    </div>
</body>